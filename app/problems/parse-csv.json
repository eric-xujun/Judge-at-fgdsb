{
    "name": "parse CSV",
    "id": "parse-csv",
    "discuss_link": "",
    "desc": "",
    "difficulty": "Easy",
    "source": "Uber",
    "time": "2015-08-05 16:09:28",
    "tags": [],
    "code_cpp": "",
    "code_java": "class Solution {\n          public static void main(String[] args) {\n            //#1\n            ArrayList<String> output = parseCSV(\"John,Smith,john.smith@gmail.com,Los Angeles,1\");\n            String strOutput = printStr(output);\n            System.out.println(strOutput);\n            //#2\n            //output = parseCSV(\"Jane,Roberts,janer@msn.com,\\\"San Francisco, CA\\\",0\");\n            //strOutput = printStr(output);\n            //System.out.println(strOutput);\n            //output = parseCSV(\"\\\"Alexandra \\\"\\\"Alex\\\"\\\"\\\",Menendez,alex.menendez@gmail.com,Miami,1\");\n            //strOutput = printStr(output);\n            //System.out.println(strOutput);\n          }\n\n          public static ArrayList<String> parseCSV(String str) {\n            ArrayList<String> res = new ArrayList<String>();\n            boolean inQuote = false;\n            StringBuilder buffer = new StringBuilder();\n            for(int i = 0; i < str.length(); i++) {\n              if(inQuote) {\n                if(str.charAt(i) == '\"') {\n                  if(i == str.length()-1) {\n                    res.add(buffer.toString());\n                    return res;\n                  } else if(str.charAt(i+1) == '\"') {\n                    buffer.append('\"');\n                    i++;\n                  } else {\n                    res.add(buffer.toString());\n                    buffer.setLength(0);\n                    inQuote = false;\n                    i++;\n                  }\n                } else buffer.append(str.charAt(i));\n              } else {\n                if(str.charAt(i) == '\"') {\n                  inQuote = true;\n                } else if( str.charAt(i) == ',') {\n                  res.add(buffer.toString());\n                  buffer.setLength(0);\n                } else {\n                  buffer.append(str.charAt(i));\n                }\n\n              }\n\n            }\n            if(buffer.length() > 0) res.add(buffer.toString());\n            return res;\n          }\n\n          public static String printStr(ArrayList<String> list) {\n            StringBuilder res = new StringBuilder();\n            for(int i = 0; i < list.size()-1; i++) {\n              res.append(list.get(i));\n              res.append('|');\n            }\n            res.append(list.get(list.size()-1));\n            return res.toString();\n          }\npublic static ArrayList<String> parseCSV2(String str) {\n        boolean mark = false;\n        boolean dMark = false;\n        ArrayList<String> ret = new ArrayList<String>();\n        StringBuilder part = new StringBuilder();\n        for (int i = 0; i < str.length(); i++) {\n                char c = str.charAt(i);\n//                if (dMark) {\n//                        if(c == '\\\"'){. From 1point 3acres bbs\n//                                if (i == str.length() - 1) {\n//                                        ret.add(part.toString());\n//                                        return ret;\n//                                } else if (str.charAt(i + 1) == '\\\"') {\n//                                        //\"\"asdf\"\"\n//                                        dMark = false;\n//                                        part.append('\\\"');\n//                                        i++;\n//                                } else\n//                                        part.append(c);\n//                        }else part.append(c);\n//                } else \n                if (mark) {\n                        if (c == '\\\"') {\n                                if (i == str.length() - 1) {\n                                        ret.add(part.toString());\n                                        return ret;\n                                } else if (str.charAt(i + 1) == '\\\"') {\n                                        // “asdf“fdsa”fdas”\n                                        part.append('\\\"');\n                                        i++;\n                                } else\n                                        mark = false;\n                        } else\n                                part.append(c);\n                } else {\n                        if (c == ',') {\n                                ret.add(part.toString());\n                                part.setLength(0);\n                        } else if (c == '\\\"') {\n                                if (i == str.length() - 1) {\n                                        ret.add(part.toString());\n                                        return ret;\n                                } \n//                                else if (str.charAt(i + 1) == '\\\"') {\n//                                        part.append('\\\"');\n//                                        dMark = true;\n//                                        i++;\n//                                } \n                                else\n                                        mark = true;\n                        } else\n                                part.append(c);\n                }\n        }\n        ret.add(part.toString());\n        return ret;\n}\npublic static String parseCSV3(String str) {\n        StringBuilder ret = new StringBuilder();\n        StringBuilder part = new StringBuilder();\n        boolean isQuote = false;\n        for (int i = 0; i < str.length(); i++) {\n                char c = str.charAt(i);\n                if (isQuote) {\n                        if (c == '\\\"') {\n                                if (i == str.length() - 1)\n                                        return ret.append(part.toString()).toString();\n                                else if (str.charAt(i + 1) == '\\\"') {\n                                        part.append('\\\"');\n                                        i++;\n                                } else\n                                        isQuote = false;\n                        } else\n                                part.append(c);\n                } else {\n                        if (c == ',') {\n                                part.append('|');\n                                ret.append(part.toString());\n                                part.setLength(0);\n                        } else if (c == '\\\"') {\n                                isQuote = true;\n                        } else\n                                part.append(c);\n                }\n        }\n        return ret.append(part.toString()).toString();\n}\n}",
    "code_ruby": "",
    "code_python": "",
    "code_lua": "",
    "code_scala": "",
    "in_type_cpp": [
        ""
    ],
    "ret_type_cpp": "",
    "out_type_cpp": "",
    "judge_type_cpp": "equal",
    "in_type_java": [
        ""
    ],
    "ret_type_java": "",
    "out_type_java": "",
    "judge_type_java": "equal",
    "judge_type_ruby": "equal",
    "judge_type_python": "equal",
    "judge_type_lua": "equal",
    "judge_call": "function(@)"
}